reed.namespace("controllers.home").index=function(n,t,i,r){function h(t){t.xmas&&i.isIt().tabletOrLarger&&n(document).snowfall({flakeCount:250,deviceorientation:!0,maxSize:5,maxSpeed:10,round:!0,collection:".collector",containerElement:"#container"})}function c(){n(document).on("click",".gtmRecruiterTag",function(){n(this).closest("aside").hasClass("open")&&i.gtmPush({event:"homePageRightRecruiterLinkClickResponsive"})});n(document).on("click",".gtmPostCv",function(){i.gtmPush({event:"homePageCvUploadLinkResponsive"})});n(document).on("click",".gtmRecruiterProfile",function(){i.gtmPush({event:"homePageRecruiterProfileLinkClickResponsive",eventAction:n(this).attr("data-recruiterName")+" jobs"})});n(document).on("click",".gtmFindACompany",function(){i.gtmPush({event:"homePageRecruiterPanelFindCompanyResponsive"})});n(document).on("click",".gtmSectorLink",function(){i.gtmPush({event:"homePageSectorLinkClickResponsive",eventLabel:n(this).attr("data-sectorName")})});n(document).on("click",".gtmSectorPanel",function(){i.gtmPush({event:"homePageSectorPanelClickResponsive",eventLabel:n(this).children()[0].innerText})});n(document).on("click",".gtmBrandShowcase",function(){i.gtmPush({event:"homePagePromotedRecruiterProfileResponsive",eventAction:n(this).attr("data-recruiterBrand")+" jobs"})});n(document).on("click",".gtmLocationPanel",function(){i.gtmPush({event:"homePageLocationPanelClickResponsive",eventLabel:n(this).children()[0].innerText})});n(document).on("click",".gtmLocationLink",function(){i.gtmPush({event:"homePageLocationLinkClickResponsive",eventLabel:n(this).attr("data-location")})});n(document).on("click",".gtmAdvertiseNow",function(){i.gtmPush({event:"gtmJobseekerHomepageResponsive",eventAction:"advertise_now_side_panel",eventLabel:"recruiter"})});n(document).on("click",".gtmPopularSearch",function(){var t=n(this).text().replace(/ /g,"_");i.gtmPush({event:"gtmJobseekerHomepageResponsive",eventAction:"popular_search",eventLabel:t})});n(document).on("click",".gtmRecruiterProfile",function(){var t=n(this).attr("data-companyName").replace(/ /g,"_");i.gtmPush({event:"homePageRecruiterPanelClickResponsive",eventAction:"jobs_at_"+t})})}function l(){var t=new Blazy({selector:"[data-src]",offset:10,breakpoints:[{width:767,src:"data-src-small"},{width:1024,src:"data-src-medium"}],success:function(t){n(t).hide().fadeIn(500)},error:function(n,t){t==="missing"||t==="invalid"}});u.$window.on("resize",function(){t.revalidate()})}function o(n){i.getParameterByName(n)===""?i.setHash(i.addParamtoHash(i.getHash(),n,"true")):i.setHash(i.removeParamFromHash(i.getHash(),n))}function s(){return i.getParameterByName("allSectors")===""?(u.$browseAllSectorsButton.removeClass("open"),u.$sectorList.removeClass("open")):(u.$browseAllSectorsButton.addClass("open"),u.$sectorList.addClass("open")),i.getParameterByName("allLocations")===""?(u.$browseAllLocationsButton.removeClass("open"),u.$locationList.removeClass("open")):(u.$browseAllLocationsButton.addClass("open"),u.$locationList.addClass("open")),!1}function a(){var t=i.getCookie("ReedJobSearch"),r="",n;return t&&(n=t.split("="),n.length===2&&(r=decodeURIComponent(n[1]).replace(/\+/g," "))),r}function v(){u.$mainSearchForm.on("submit",function(){n("#main-location").removeAttr("autocomplete")});u.$recruiterTab.on("click",function(){u.$recruiterTab.parent().toggleClass("open")});u.$browseAllSectorsButton.on("click",function(){var t=n(this);t.hasClass("open")||n("html, body").animate({scrollTop:t.offset().top-10},e);o("allSectors")});u.$browseAllLocationsButton.on("click",function(){var t=n(this);t.hasClass("open")||n("html, body").animate({scrollTop:t.offset().top-10},e);o("allLocations")});n(window).on("hashchange",s);const t=/[^a-z0-9\s_.,/#&+()\-"'%*\\\u00C0-\u024F\u1E00-\u1EFF¡¢]/ig;n("#main-keywords").on("input",function(i){t.test(i.originalEvent.srcElement.value)&&n("#main-keywords").val(i.originalEvent.srcElement.value.replace(t,""))});n("#main-location").on("input",function(i){t.test(i.originalEvent.srcElement.value)&&n("#main-location").val(i.originalEvent.srcElement.value.replace(t,""))})}function y(n){n.deactivateUserCookie&&swal({html:'<div style="font-size: 16px;"><p class="text-center"><strong>Your account is being deactivated.<\/strong><br />You can reactivate your account in the future by simply signing in.<\/p><div class="alert alert-info"><p><i class="icon icon-alert-new-info" style="float: left;"><\/i><span style="display: block; margin-left: 30px;">You may still receive our communications for up to 24 hours.<\/span><\/p><\/div><\/div>',type:"success",showCloseButton:!0,customClass:"deactivate-overlay",confirmButtonClass:"btn btn-primary",buttonsStyling:!1}).catch(swal.noop)}function p(){f.twoStepsSearchEnabled=t.observable(reed.shared.search.getModel().twoStepsSearchEnabled()||!1)}function w(i){function o(t){u("");n(t).focus()}var u=t.observable(""),e=t.observable(i.prevLocation||""),s=function(n,t){r.getLocation(function(n,t){if(n)return n;e(t.FullName)});t.preventDefault()};return f={clearValue:o,getLocation:s,searchKeywords:u,searchLocation:e}}function b(n){n=n||{};n.prevLocation=a();f=w(n);c();l();s();v(n);y(n);h(n);p(n);t.applyBindings(f,u.$content[0])}var u={$window:n(window),$html:n("html"),$content:n("#content"),$location:n("#main-location"),$recruiterTab:n(".recruiter-tab header"),$browseAllSectorsButton:n(".browse-all-sectors"),$sectorList:n(".sector-list"),$browseAllLocationsButton:n(".browse-all-locations"),$locationList:n(".locations-uk"),$mainSearchContainer:n("#homepage .main-search-container"),$header:n("#site-header"),$mainSearchForm:n("#main-search-new"),$recentSearches:n(".recent-searches-title")},e=500,f={};return{init:b,getModel:function(){return f}}}(jQuery,ko,reed.shared.utils,reed.shared.geolocation)